<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="StateTrace"
        Height="600"
        Width="1350"
        Background="{DynamicResource Theme.Window.Background}">

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Top toolbar: device selector, refresh and filtering controls -->
    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5" Background="{DynamicResource Theme.Toolbar.Background}">
      <Label Content="Device:" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}"/>
      <!-- Allow the hostname dropdown to be searchable by enabling text editing
           and text search.  Users can start typing a switch name to quickly
           locate it. -->
      <ComboBox Name="HostnameDropdown" Width="180" Margin="5,0" IsEditable="True" IsTextSearchEnabled="True" Style="{DynamicResource ToolbarComboBoxStyle}"/>
      <Label Content="Recent:" VerticalAlignment="Center" Margin="10,0,0,0" Style="{DynamicResource ToolbarLabelStyle}"/>
      <ComboBox Name="RecentDevicesDropdown" Width="140" Margin="5,0" Style="{DynamicResource ToolbarComboBoxStyle}" ToolTip="Recently viewed devices - click to jump back"/>
      <Button Name="RefreshButton" Content="_Scan Logs" Margin="5,0" Style="{DynamicResource PrimaryButtonStyle}" ToolTip="Scan log files for device data (Alt+S)"/>
      <CheckBox Name="ForceReloadCheckbox" Content="Clear cache before scan" VerticalAlignment="Center" Margin="5,0" Style="{DynamicResource ToolbarCheckBoxStyle}" ToolTip="Clears cached interface data and ingestion history before scanning logs"/>
      <Button Name="LoadDatabaseButton" Content="_Load from DB" Margin="5,0" Style="{DynamicResource PrimaryButtonStyle}" ToolTip="Load devices from the existing database without scanning logs (Alt+L)"/>
      <!-- Checkbox to include archive data (most recent) -->
      <CheckBox Name="IncludeArchiveCheckbox" Content="Include archives" VerticalAlignment="Center" Margin="10,0" Style="{DynamicResource ToolbarCheckBoxStyle}"/>
      <!-- Checkbox to include historical data from archives -->
      <CheckBox Name="IncludeHistoricalCheckbox" Content="Include history" VerticalAlignment="Center" Margin="5,0" Style="{DynamicResource ToolbarCheckBoxStyle}"/>
    </StackPanel>

    <!-- Location filter bar directly under the main toolbar -->
    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="5" Background="{DynamicResource Theme.Toolbar.Background}">
      <Label Content="Site:" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}"/>
      <!-- Make the site dropdown editable so users can type to filter sites. -->
      <ComboBox Name="SiteDropdown" Width="100" Margin="5,0" IsEditable="True" IsTextSearchEnabled="True" Style="{DynamicResource ToolbarComboBoxStyle}"/>
      <Label Content="Zone:" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}"/>
      <!-- Zone dropdown with search capability -->
      <ComboBox Name="ZoneDropdown" Width="100" Margin="5,0" IsEditable="True" IsTextSearchEnabled="True" Style="{DynamicResource ToolbarComboBoxStyle}"/>
      <Label Content="Building:" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}"/>
      <!-- Building dropdown with search capability -->
      <ComboBox Name="BuildingDropdown" Width="120" Margin="5,0" IsEditable="True" IsTextSearchEnabled="True" Style="{DynamicResource ToolbarComboBoxStyle}"/>
      <Label Content="Room:" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}"/>
      <!-- Room dropdown with search capability -->
      <ComboBox Name="RoomDropdown" Width="100" Margin="5,0" IsEditable="True" IsTextSearchEnabled="True" Style="{DynamicResource ToolbarComboBoxStyle}"/>
    </StackPanel>

    <!-- Row 2: Show command controls -->
    <Grid Grid.Row="2" Margin="5">
      <!-- Use Margin instead of Padding on StackPanel. Padding is not supported on StackPanel in WPF.
           The surrounding Grid already provides margin spacing. -->
      <StackPanel Orientation="Horizontal" Background="{DynamicResource Theme.Toolbar.Background}" Margin="5,0,5,0">
        <Label Content="Show Commands:" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}" Margin="0,0,10,0"/>
        <Button Name="ShowCiscoButton" Content="_Cisco" Width="90" Margin="0,0,5,0" Style="{DynamicResource PrimaryButtonStyle}" ToolTip="Copy Cisco show commands to clipboard (Alt+C)"/>
        <Button Name="ShowBrocadeButton" Content="_Brocade" Width="100" Margin="0,0,5,0" Style="{DynamicResource PrimaryButtonStyle}" ToolTip="Copy Brocade show commands to clipboard (Alt+B)"/>
        <!-- Dropdown to select the Brocade OS version.  Values are populated at runtime
             from ShowCommands.json via Set-ShowCommandsOSVersions.  Provide a blank
             ComboBox here so the code-behind can bind the list of versions. -->
        <ComboBox Name="BrocadeOSDropdown" Width="110" Margin="0,0,5,0" Style="{DynamicResource ToolbarComboBoxStyle}"/>
        <!-- Help button opens a window containing documentation for each section of the GUI -->
        <Button Name="HelpButton" Content="_Help" Width="60" Margin="0,0,0,0" Style="{DynamicResource PrimaryButtonStyle}" ToolTip="Open help documentation (Alt+H)"/>
        <Label Content="Theme:" VerticalAlignment="Center" Margin="15,0,0,0" Style="{DynamicResource ToolbarLabelStyle}"/>
        <ComboBox Name="ThemeSelector" Width="170" Margin="5,0" IsEditable="False" Style="{DynamicResource ToolbarComboBoxStyle}"/>
        <CheckBox Name="DebugNextLaunchCheckbox" Content="Enable debug next launch" Margin="10,0,0,0" VerticalAlignment="Center" Style="{DynamicResource ToolbarCheckBoxStyle}" ToolTip="Stores preference to enable verbose diagnostics on the next application start"/>
        <!-- Compare configs button removed; comparison is launched from the Interfaces tab -->
      </StackPanel>
    </Grid>

    <!-- Main content area: primary tabs with a collapsible compare sidebar -->
    <Grid Grid.Row="3" Margin="5">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <!-- CompareColumn's width is toggled in code-behind to show or hide the compare sidebar -->
        <ColumnDefinition x:Name="CompareColumn" Width="0" />
      </Grid.ColumnDefinitions>
      <!-- Primary tabs occupy the first column -->
      <TabControl Grid.Column="0" Name="MainTabControl">
        <TabItem Header="Summary" ToolTip="Device overview and status summary (Ctrl+1)">
          <ContentControl Name="SummaryHost"/>
        </TabItem>
        <TabItem Header="Interfaces" ToolTip="Interface details and port status (Ctrl+2)">
          <ContentControl Name="InterfacesHost"/>
        </TabItem>
        <TabItem Header="SPAN" ToolTip="Spanning tree protocol analysis (Ctrl+3)">
          <ContentControl Name="SpanHost"/>
        </TabItem>
        <TabItem Header="Search" ToolTip="Cross-device interface search (Ctrl+4)">
          <ContentControl Name="SearchInterfacesHost"/>
        </TabItem>
        <!-- Alerts tab displays detected issues or anomalies across all interfaces -->
        <TabItem Header="Alerts" ToolTip="Issue detection and anomaly alerts (Ctrl+5)">
          <ContentControl Name="AlertsHost"/>
        </TabItem>
        <!-- Documentation container: Generator, Config Templates, Templates, Cmd Reference -->
        <TabItem Header="ðŸ“„ Docs" ToolTip="Documentation (Ctrl+6)&#x0a;â€¢ Generator - Template-based documentation&#x0a;â€¢ Config Templates - Configuration validation&#x0a;â€¢ Templates - Show command templates&#x0a;â€¢ Cmd Reference - Cross-vendor commands">
          <ContentControl Name="DocumentationContainerHost"/>
        </TabItem>
        <!-- Infrastructure container: Topology, Cables, IPAM, Inventory -->
        <TabItem Header="ðŸ— Infra" ToolTip="Infrastructure (Ctrl+7)&#x0a;â€¢ Topology - Network visualization&#x0a;â€¢ Cables - Patch panel tracking&#x0a;â€¢ IPAM - IP/VLAN management&#x0a;â€¢ Inventory - Asset tracking">
          <ContentControl Name="InfrastructureContainerHost"/>
        </TabItem>
        <!-- Operations container: Changes, Capacity, Log Analysis -->
        <TabItem Header="ðŸ“Š Ops" ToolTip="Operations (Ctrl+8)&#x0a;â€¢ Changes - Maintenance windows&#x0a;â€¢ Capacity - Utilization forecasting&#x0a;â€¢ Log Analysis - Pattern detection">
          <ContentControl Name="OperationsContainerHost"/>
        </TabItem>
        <!-- Tools container: Troubleshoot, Calculator -->
        <TabItem Header="ðŸ›  Tools" ToolTip="Tools (Ctrl+9)&#x0a;â€¢ Troubleshoot - Decision trees&#x0a;â€¢ Calculator - Subnet/VLAN/ACL">
          <ContentControl Name="ToolsContainerHost"/>
        </TabItem>
        <!-- Add more tabs here -->
      </TabControl>
      <!-- Compare sidebar occupies the second column and hosts the compare view.  It is hidden by default by setting the column width to zero. -->
      <Border Grid.Column="1" Background="{DynamicResource Theme.Surface.Secondary}" Padding="5">
        <ContentControl Name="CompareHost"/>
      </Border>
    </Grid>

    <!-- Bottom status bar: parser status, pipeline health, and site freshness -->
    <Grid Grid.Row="4" Margin="5,5" Background="{DynamicResource Theme.Toolbar.Background}">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>

      <!-- Left: Parser status -->
      <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="5,0">
        <Label Name="ParserStatusText" Content="Parser idle" Margin="0,0,10,0" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}"/>
        <Label Name="ParserDetailText" Content="" Margin="0,0,10,0" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}"/>
        <Button Name="ViewPipelineLogButton" Content="View Log" Margin="0,0,5,0" Style="{DynamicResource SecondaryButtonStyle}" ToolTip="Open the latest pipeline log file" Visibility="Collapsed"/>
      </StackPanel>

      <!-- Center: Pipeline health summary -->
      <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5,0">
        <Label Name="PipelineHealthLabel" Content="" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}" ToolTip="Last pipeline run status"/>
      </StackPanel>

      <!-- Right: Freshness indicator with status circle -->
      <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="5,0">
        <Button Name="RefreshFromDbButton" Content="_Reload DB" Margin="0,0,10,0" Style="{DynamicResource SecondaryButtonStyle}" ToolTip="Reload interface data from the database without re-parsing logs (Alt+R)"/>
        <Ellipse Name="FreshnessIndicator" Width="12" Height="12" Margin="0,0,5,0" VerticalAlignment="Center" Fill="Gray" ToolTip="Data freshness status"/>
        <Label Name="FreshnessLabel" Content="Freshness: select a site" VerticalAlignment="Center" Style="{DynamicResource ToolbarLabelStyle}" ToolTip="Displays the last ingest timestamp for the selected site."/>
      </StackPanel>
    </Grid>
  </Grid>
</Window>







