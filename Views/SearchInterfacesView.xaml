<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="SearchInterfacesControl">

  <Grid Background="{DynamicResource Theme.Surface.Primary}">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
      <TextBox Name="SearchBox" Width="200" Margin="0,0,5,0" Background="{DynamicResource Theme.Input.Background}" Foreground="{DynamicResource Theme.Input.Text}" BorderBrush="{DynamicResource Theme.Input.Border}" BorderThickness="1" ToolTip="Enter description or MAC to search"/>
      <Button Name="SearchClearButton" Content="X" Width="25" Height="23" Style="{DynamicResource PrimaryButtonStyle}" ToolTip="Clear search" Margin="0,0,5,0"/>

      <CheckBox Name="RegexCheckbox" Content="Regex" VerticalAlignment="Center" Margin="0,0,5,0" Style="{DynamicResource ToolbarCheckBoxStyle}"/>

      <Label Content="Status:" VerticalAlignment="Center" Margin="5,0,0,0" Style="{DynamicResource ToolbarLabelStyle}"/>
      <ComboBox Name="StatusFilter" Style="{DynamicResource ToolbarComboBoxStyle}" Width="70" Margin="0,0,5,0" SelectedIndex="0">
        <ComboBoxItem Content="All"/>
        <ComboBoxItem Content="Up"/>
        <ComboBoxItem Content="Down"/>
      </ComboBox>

      <Label Content="Auth:" VerticalAlignment="Center" Margin="0,0,0,0" Style="{DynamicResource ToolbarLabelStyle}"/>
      <ComboBox Name="AuthFilter" Style="{DynamicResource ToolbarComboBoxStyle}" Width="100" Margin="0,0,5,0" SelectedIndex="0">
        <ComboBoxItem Content="All"/>
        <ComboBoxItem Content="Authorized"/>
        <ComboBoxItem Content="Unauthorized"/>
      </ComboBox>

      <Label Content="VLAN:" VerticalAlignment="Center" Margin="0,0,0,0" Style="{DynamicResource ToolbarLabelStyle}"/>
      <ComboBox Name="VlanFilter" Style="{DynamicResource ToolbarComboBoxStyle}" Width="80" Margin="0,0,5,0" SelectedIndex="0">
        <ComboBoxItem Content="All"/>
      </ComboBox>

      <Button Name="ExportSearchButton" Content="Export" Width="60" Height="23" Style="{DynamicResource PrimaryButtonStyle}" ToolTip="Export search results to CSV"/>
    </StackPanel>

    <Grid Grid.Row="1">
      <DataGrid Name="SearchInterfacesGrid"
                AutoGenerateColumns="False"
                Margin="5"
                CanUserAddRows="False"
                IsReadOnly="True"
                SelectionMode="Extended"
                Style="{DynamicResource PrimaryDataGridStyle}"
                ScrollViewer.VerticalScrollBarVisibility="Auto"
                ScrollViewer.HorizontalScrollBarVisibility="Auto"
                ScrollViewer.IsDeferredScrollingEnabled="True"
                VirtualizingPanel.IsVirtualizing="True"
                VirtualizingPanel.VirtualizationMode="Recycling"
                EnableRowVirtualization="True"
                EnableColumnVirtualization="True"
                ScrollViewer.CanContentScroll="True"
                VirtualizingPanel.ScrollUnit="Pixel">
        <DataGrid.RowStyle>
          <DynamicResource ResourceKey="PrimaryDataGridRowStyle"/>
        </DataGrid.RowStyle>
        <DataGrid.Columns>
          <DataGridTextColumn Header="Switch" Binding="{Binding Hostname}" Width="120"/>
          <DataGridTextColumn Header="Port" Binding="{Binding Port}" Width="80"/>
          <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="150"/>
          <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="80"/>
          <DataGridTextColumn Header="VLAN" Binding="{Binding VLAN}" Width="60"/>
          <DataGridTextColumn Header="Duplex" Binding="{Binding Duplex}" Width="60"/>
          <DataGridTextColumn Header="Speed" Binding="{Binding Speed}" Width="60"/>
          <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="100"/>
          <DataGridTextColumn Header="LearnedMACs" Binding="{Binding LearnedMACs}" Width="160">
            <DataGridTextColumn.ElementStyle>
              <Style TargetType="TextBlock">
                <Setter Property="TextWrapping" Value="NoWrap"/>
                <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
              </Style>
            </DataGridTextColumn.ElementStyle>
          </DataGridTextColumn>
          <DataGridTextColumn Header="AuthState" Binding="{Binding AuthState}" Width="100"/>
          <DataGridTextColumn Header="AuthMode" Binding="{Binding AuthMode}" Width="80"/>
          <DataGridTextColumn Header="Client MAC" Binding="{Binding AuthClientMAC}" Width="120"/>
        </DataGrid.Columns>
      </DataGrid>

      <Border Name="SearchEmptyStatePanel" HorizontalAlignment="Center" VerticalAlignment="Center"
              Background="{DynamicResource Theme.Surface.Secondary}" Padding="30,20" CornerRadius="8"
              Visibility="Collapsed">
        <StackPanel>
          <TextBlock Text="No Results" FontSize="18" FontWeight="Bold"
                     Foreground="{DynamicResource Theme.Text.Primary}" HorizontalAlignment="Center"/>
          <TextBlock Text="Enter a search term to find interfaces"
                     Foreground="{DynamicResource Theme.Text.Muted}" HorizontalAlignment="Center" Margin="0,5,0,0"/>
        </StackPanel>
      </Border>

      <Border Name="SearchLoadingIndicator" Style="{DynamicResource LoadingIndicatorStyle}">
        <StackPanel>
          <TextBlock Text="Searching..." Style="{DynamicResource LoadingTextStyle}"/>
          <ProgressBar Style="{DynamicResource LoadingProgressStyle}"/>
        </StackPanel>
      </Border>
    </Grid>

    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="5" HorizontalAlignment="Left">
      <TextBlock Name="SearchResultsStatus" Text="" VerticalAlignment="Center" Foreground="{DynamicResource Theme.Text.Secondary}" Margin="0,0,10,0"/>
      <Button Name="LoadMoreButton" Content="Load More" Width="80" Height="23" Style="{DynamicResource PrimaryButtonStyle}" Visibility="Collapsed" ToolTip="Load more results"/>
    </StackPanel>
  </Grid>
</UserControl>
