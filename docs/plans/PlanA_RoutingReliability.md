# Plan A – Routing Reliability

## Objective
Guarantee that parser output, dispatcher queueing, and interface hydration stay in lockstep so operators always see the latest routing information in the UI. Plan A owns InterfaceSync timing, dispatcher health, queue depth, and regression coverage for port delivery.

## Current status (2025-11)
- Interface queue instrumentation (`InterfacePortQueueMetrics`, `InterfaceSyncTiming`) was restored in the 2025-10-15 fixes (see `docs/StateTrace_Consolidated_Plans.md` around 15:12-16:30 MT), and the Codex automation matrix now maps Plan A tasks to the dispatcher harness + pipeline reset commands (`docs/CODEX_PLAN_AUTOMATION_MATRIX.md`).
- Dispatcher latency is traced separately from parser persistence; queue build times remain under 30 ms, so remaining latency lives upstream (historical log 2025-10-15 16:45 MT). We still need a recurring validation to prove the harness results land in `Logs/IngestionMetrics/*.json`.
- Plan B progression on shared cache hydration affects first-host cold starts; Plan A owns verifying that routing telemetry (`InterfaceSyncTiming`, dispatcher metrics) reaches the UI immediately after parsing, even when cold hydrations are slow. Coordinate with Plan B when cache regressions (WLLS/BOYO) could mask routing telemetry.
- No automated alert currently watches `InterfacePortQueueMetrics.QueueDelayMs`; Plan A must wire the planned alert into `Tools/Invoke-StateTraceVerification.ps1` or the dispatcher harness so releases block when queue delay exceeds thresholds.
- Plan D’s incremental loading UX relies on Plan A telemetry; keep the plan in sync with `docs/StateTrace_Operators_Runbook.md` and ensure UI smoke steps reference the routing metrics captured here.

## Active work
| ID | Title | Owner | Status | Notes |
|----|-------|-------|--------|-------|
| ST-A-001 | Verify InterfaceSync timing completeness after recent parser refactors | Ingestion | Done - 2025-11-14 | 2025-11-14 pipeline replay + dispatcher sweep produced 384 InterfaceSyncTiming events with queue p95/p99 = 20.02/20.76 ms (sampled via Logs/IngestionMetrics/QueueDelaySummary-20251114.json). Tools\Invoke-StateTracePipeline.ps1 -VerifyTelemetryCompleteness -FailOnTelemetryMissing and Tools\Test-IncrementalTelemetryCompleteness.ps1 -RequirePortBatchReady -RequireInterfaceSync -RequireSchedulerLaunch now pass (PortBatchReady=128, ParserSchedulerLaunch=86, scheduler guard MaxObservedStreak=1). Analyzer outputs Logs/Reports/InterfaceSyncTiming-2025-11-14.json + Logs/Reports/ParserSchedulerLaunch-2025-11-14.json are appended to the history CSVs (Logs/Reports/PortBatchHistory.csv, Logs/Reports/InterfaceSyncHistory.csv, Logs/Reports/QueueDelayHistory.csv, Logs/Reports/ParserSchedulerHistory.csv) and summarized in docs/performance/IncrementalLoading_Report.md. Routed evidence bundle: Logs/IngestionMetrics/2025-11-14.json + telemetry README + history CSVs with the fairness pass. |
| ST-A-002 | Add alert when InterfacePortQueueMetrics queue delay >120 ms | Ingestion + Telemetry | Backlog | Extend `Tools\Invoke-StateTraceVerification.ps1` (or dispatcher harness) to assert `QueueDelayMs` thresholds, fail the run, and update `docs/telemetry/Automation_Gates.md`. |
| ST-A-003 | Automate dispatcher harness evidence capture | Automation | Backlog | Document how to call `Tools\Invoke-InterfaceDispatchHarness.ps1` (parameters, expected output) in `docs/CODEX_RUNBOOK.md` and ensure every Plan A task records harness metrics + path to the generated `Logs/DispatchHarness/*.json`. |
| ST-A-004 | UI routing smoke alignment | UI / Ingestion | Backlog | Update `docs/UI_Smoke_Checklist.md` and `docs/StateTrace_Operators_Runbook.md` so routing verification steps (Interfaces tab refresh + metric sampling) reference this plan and capture `InterfaceSyncTiming` samples whenever incremental loading or parser changes land. |
| ST-A-005 | Dispatcher alert integration | Telemetry | In Progress | `Tools\Invoke-StateTraceVerification.ps1` now enforces `InterfacePortQueueMetrics.QueueBuildDelayMs` p95 ≤120 ms / p99 ≤200 ms (auto-detects the latest `Logs\IngestionMetrics\*.json`) and emits `QueueDelaySummary-<timestamp>.json`. 2025-11-13 run produced `QueueDelaySummary-20251113-114756.json` (3 samples, p95 24.87 ms). `Tools\Invoke-InterfaceDispatchHarness.ps1` raises when queue delay exceeds 200 ms—run it via `powershell.exe -STA` so dispatcher APIs are available.
| ST-A-006 | Evidence bundle linkage | Ingestion + PMO | In Progress | After each dispatcher/pipeline run, deposit Logs/IngestionMetrics/<date>.json, the generated Logs/IngestionMetrics/QueueDelaySummary-<timestamp>.json, and dispatcher harness logs into Logs/TelemetryBundles/<bundle>/Routing/. Tools\Invoke-StateTracePipeline.ps1 now emits the queue delay summary automatically and appends queue, scheduler, port, and InterfaceSync history rows (Logs/Reports/QueueDelayHistory.csv, Logs/Reports/ParserSchedulerHistory.csv, Logs/Reports/PortBatchHistory.csv, Logs/Reports/InterfaceSyncHistory.csv), and Tools\Publish-TelemetryBundle.ps1 copies all four CSVs into the bundle so prep only requires copying the JSON + referencing the matching history row. 2025-11-14 bundle: Logs/TelemetryBundles/Release-20251114/Routing/ (queue summary + WLLS/BOYO harness logs + routing sweep JSON + doc-sync evidence, readiness verified). |

## Near-term execution detail

### ST-A-005 — Queue delay guardrails
- **Status (2025-11-13):** `Tools\Invoke-StateTraceVerification.ps1` now auto-loads the latest `Logs\IngestionMetrics\<date>.json`, parses `InterfacePortQueueMetrics` events, and fails when `QueueBuildDelayMs` p95 exceeds 120 ms or p99 exceeds 200 ms. The dispatcher harness mirrors the guard (`-QueueDelayWarningMs 120 -QueueDelayCriticalMs 200`) so single-host replays surface regressions even without the full pipeline.
- **Verification wiring:** `Tools\Invoke-StateTraceVerification.ps1` auto-discovers the latest `Logs\IngestionMetrics/<date>.json`, parses `InterfacePortQueueMetrics` (a.k.a. `QueueBuildDelayMs`), and fails the run when p95 > 120 ms or p99 > 200 ms. Supply `-QueueMetricsPath` when replaying historical telemetry. The dispatcher harness surfaces the same guard via `-QueueDelayWarningMs`/`-QueueDelayCriticalMs`.
- **Automation gates:** `docs/telemetry/Automation_Gates.md#plan-a` lists the 120/200 ms targets and the Codex automation matrix now calls out the same guard. If thresholds change, update both docs plus the verification script defaults so Plan E rollups stay aligned.
- **Regression evidence:** When the guard triggers, capture the failing JSON snippet plus the dispatcher harness output under `Logs\DispatchHarness\DispatcherMetrics-<timestamp>.json`. Reference both paths when filing/closing TaskBoard rows ST-A-005/ST-A-006 and in the session log noted in `docs/CODEX_DOC_SYNC_PLAYBOOK.md`.
- **Doc + test hooks:** Add/extend tests in `Modules/Tests/VerificationModule.Tests.ps1` to assert the new guard, and call out the change in `docs/README.md` so operators know the harness now enforces queue delay. Update the UI smoke checklist entry that references routing latency so the manual backup procedure matches the guardrail.

### ST-A-001 - Host coverage + shared-cache coupling
- **Host census:** Keep `Data/RoutingHosts.txt` authoritative by comparing it with the CMDB export before each dispatcher sweep. The file now captures all 37 WLLS/BOYO hosts pulled from the 2025-11-13 telemetry, and `Tools\New-BalancedRoutingHostList.ps1` regenerates both the canonical list and the segmented rotation in `Data/RoutingHosts_Balanced.txt`. Document any delta (added/removed hosts, mismatched casing) inside TaskBoard row ST-A-001 so auditors can prove coverage.
- **Queue sweep recipe:** `Tools\Invoke-RoutingQueueSweep.ps1 -UseBalancedHostOrder -QueueDelayWarningMs 120 -QueueDelayCriticalMs 200 -OutputDirectory Logs\DispatchHarness` shells out to `powershell.exe -STA` per host, producing per-host logs plus `Logs\DispatchHarness\RoutingQueueSweep-<timestamp>.json`. When `Data/RoutingHosts_Balanced.txt` exists the script consumes it as-is (no rebalancing), so the harness follows the same round-robin order we advertise to UI/runtime teams. Pass `-Verbose` when isolating stragglers so Dispatcher API traces are preserved.
- **Evidence stitching:** After every sweep, capture (1) the JSON summary, (2) at least the slowest-host transcript, and (3) the matching `Logs\IngestionMetrics\QueueDelaySummary-<timestamp>.json`. Reference all three paths in this plan’s timeline plus `docs/StateTrace_TaskBoard.md`, then drop them into the routing telemetry bundle (ST-A-006) so Plan G can review a single artifact.
- **Shared-cache alignment:** Once Plan B publishes a healthy shared-cache snapshot, re-run the queue sweep immediately after `Tools\Invoke-StateTraceVerification.ps1 -SkipSharedCacheSummaryEvaluation:$false` so routing and cache telemetry share a bundle. Call this out in `docs/CODEX_PLAN_AUTOMATION_MATRIX.md` if additional parameters (e.g., `-SharedCacheRequiredSites`) are used.

### ST-A-006 - Routing evidence bundling
- **Bundle schema:** All dispatcher/pipeline evidence must land in `Logs\TelemetryBundles/<bundle>/Routing/` with a README that lists: commands executed, host/site coverage, queue-delay stats, `InterfaceSyncTiming` counts, and the TaskBoard IDs touched (ST-A-001 through ST-A-006). Reuse `Tools\Publish-TelemetryBundle.ps1 -AreaName Routing` so manifests/hashes stay aligned with Plan E ST-E-009 expectations.
- **Drop artifacts:** Minimum files per bundle: `Logs\IngestionMetrics\<run>.json`, dispatcher harness CSV/JSON output, the generated `Logs\IngestionMetrics\QueueDelaySummary-<timestamp>.json` (and `QueueDelaySummary-latest.json` pointer), queue delay chart (`DispatcherQueueDelay-<timestamp>.png` if generated), routing sweep JSON + slowest-host transcript, and the doc-sync checklist export proving Plan A + TaskBoard + backlog updates occurred. Link these paths back into `docs/StateTrace_TaskBoard.md` rows ST-A-005/ST-A-006.
- **Release gating:** Note in `docs/Release.md` (via Plan G) that routing bundles are a hard precondition for release sign-off and call out ST-G-007 as the consumer task. Until Plan G automation lands, add a manual checklist item under this plan's "Automation hooks" reminding release drivers to verify the `Routing/` area exists in the current telemetry bundle.
- **Audit trail:** Record bundle hashes + README excerpts in `docs/CODEX_RUNBOOK.md` (Plan A section) to make it obvious how to regenerate evidence during incident reviews. Also keep a running list of bundle folders in this plan's timeline with MT timestamps so auditors can trace when routing evidence was produced relative to parser changes.

## Recent timeline (migrated from consolidated log)
| Date (MT) | Summary | Metrics / Artifacts | Source |
|-----------|---------|---------------------|--------|
| 2025-11-13 11:47 | Trimmed legacy debug logs, reran the verification harness (skip parsing) plus dispatcher harness for WLLS-A01-AS-01 and BOYO-A05-AS-05 via `powershell.exe -STA`, and captured the queue-delay summary (SampleCount=3, avg 20.48 ms, p95 24.87 ms, p99 25.26 ms). | `Logs/IngestionMetrics/2025-11-13.json`, `Logs/IngestionMetrics/QueueDelaySummary-20251113-114756.json`, dispatcher harness console log. | Tools/Invoke-StateTraceVerification.ps1, Tools/Invoke-InterfaceDispatchHarness.ps1 |
| 2025-11-13 11:50 | Published the routing evidence bundle (`Logs/TelemetryBundles/Routing-20251113/Routing/`) containing the queue summary JSON, dispatcher harness logs (WLLS/BOYO), and session log reference for ST-A-005/006. | `Tools\New-TelemetryBundle.ps1 -BundleName Routing-20251113 -AreaName Routing ...` output. | Logs/TelemetryBundles/Routing-20251113/Routing |
| 2025-11-13 12:05 | Ran `Tools\Invoke-RoutingQueueSweep.ps1 -HostListPath Data\RoutingHosts.txt` to collect queue metrics for the initial 17 BOYO/WLLS hosts (all <25 ms). Logs stored per host plus aggregate summary (`Logs\DispatchHarness\RoutingQueueSweep-20251113.json`). | `Logs\DispatchHarness\<host>-20251113-120508.log`, JSON summary with QueueDelay stats (avg 19-24 ms). | Tools/Invoke-RoutingQueueSweep.ps1 |
| 2025-11-14 07:55 | Expanded `Data/RoutingHosts.txt` (and the balanced variant) to all 37 BOYO/WLLS hosts via `Tools\New-BalancedRoutingHostList.ps1`, then ran `Tools\Invoke-RoutingQueueSweep.ps1 -UseBalancedHostOrder`. The new summary (`Logs\DispatchHarness\RoutingQueueSweep-20251114-balanced2.json` + per-host logs) shows queue delay <=32 ms and longest WLLS streak = 2, addressing the earlier starvation evidence referenced by Plan D. | `Logs\DispatchHarness\*\-20251114-075523.log`, `Logs\DispatchHarness\RoutingQueueSweep-20251114-balanced2.json`, doc `docs/performance/DispatchHarnessSweepOrder-20251114-balanced.md`. | Tools/Invoke-RoutingQueueSweep.ps1, Tools/New-BalancedRoutingHostList.ps1 |
| 2025-11-14 08:18 | Generated queue-delay summary and incremental-loading artifacts directly from telemetry via `Tools\Generate-QueueDelaySummary.ps1` + `Tools/Add-PortBatchReadyTelemetry.ps1`, then bundled the evidence under `Logs/TelemetryBundles/Release-20251114/Telemetry/`. Queue p95/p99 = 20.02/20.76 ms (128 samples). | `Logs/IngestionMetrics/QueueDelaySummary-20251114.json`, `Logs/Reports/PortBatchReady-20251114.json`, telemetry bundle README. | Tools/Add-PortBatchReadyTelemetry.ps1, Tools/Generate-QueueDelaySummary.ps1, Logs/TelemetryBundles/Release-20251114/Telemetry/ |
| 2025-11-14 10:32 | Verified incremental telemetry completeness for the routing bundle: `Tools\Test-IncrementalTelemetryCompleteness.ps1 -RequirePortBatchReady -RequireInterfaceSync -RequireSchedulerLaunch -ThrowOnMissing` reports PortBatchReady=128, InterfaceSyncTiming=384, ParserSchedulerLaunch=86 (scheduler analyzer now records MaxObservedStreak=1). Regenerated analyzer outputs (`Logs/Reports/PortBatchReady-2025-11-14.json`, `Logs/Reports/InterfaceSyncTiming-2025-11-14.json`, `Logs/Reports/ParserSchedulerLaunch-2025-11-14.json`), appended them to the history CSVs, and refreshed `docs/performance/IncrementalLoading_Report.md`. `Tools\Invoke-StateTracePipeline.ps1` now filters `Logs\IngestionMetrics` to ignore queue-summary JSON before selecting the latest telemetry file, automatically invokes the PortBatchReady/InterfaceSync/Scheduler analyzers, and appends queue, scheduler, port, and InterfaceSync history rows; `Tools\Publish-TelemetryBundle.ps1` copies all four CSVs into every routing bundle. | `Logs/IngestionMetrics/2025-11-14.json`, `Logs/IngestionMetrics/QueueDelaySummary-20251114.json`, `Logs/Reports/PortBatchHistory.csv`, `Logs/Reports/InterfaceSyncHistory.csv`, `Logs/Reports/QueueDelayHistory.csv`, `Logs/Reports/ParserSchedulerHistory.csv`, `docs/performance/IncrementalLoading_Report.md`. | Tools/Test-IncrementalTelemetryCompleteness.ps1, Tools/Invoke-StateTracePipeline.ps1, Tools/Analyze-PortBatchReadyTelemetry.ps1, Tools/Analyze-InterfaceSyncTiming.ps1, Tools/Analyze-ParserSchedulerLaunch.ps1, Tools/Publish-TelemetryBundle.ps1 |
| 2025-11-14 11:35 | Verified parser scheduler fairness on the incremental-loading replay: `Logs/Reports/ParserSchedulerLaunch-2025-11-14.json` now reports `MaxObservedStreak=1` after the guard + analyzer updates, so Plan A can cite that JSON (and the history CSV row) as the scheduler evidence for ST-A-001/ST-D-003. `Tools\Test-ParserSchedulerFairness.ps1` runs automatically because `Tools\Invoke-StateTracePipeline.ps1` now enables the guard by default and fails the run whenever streak violations surface. | `Logs/IngestionMetrics/2025-11-14.json`, `Logs/Reports/ParserSchedulerLaunch-2025-11-14.json`. | Tools/Invoke-StateTracePipeline.ps1, Tools/Analyze-ParserSchedulerLaunch.ps1, Tools/Test-ParserSchedulerFairness.ps1 |
| 2025-11-14 11:20 | Landed scheduler fairness guard: `ParserRunspaceModule\Invoke-DeviceParsingJobs` now tracks `MaxConsecutiveSiteLaunches` (default 8) so the parser loops hand alternate sites to the UI once the limit is hit, and `ParserWorker\Invoke-StateTraceParsing` exposes `-MaxConsecutiveSiteLaunchesOverride` (propagated through `Tools\Invoke-StateTracePipeline.ps1`). `ConcurrencyProfileResolved` now logs the resolved limit and telemetry bundles inherit the history CSVs so routing evidence includes the guard setting. Next telemetry run needs to confirm `ParserSchedulerLaunch-*.json` reports streak ≤8 and close ST-D-010/ST-A-006. | Modules/ParserRunspaceModule.psm1, Modules/ParserWorker.psm1, Tools/Invoke-StateTracePipeline.ps1, docs updates (README, CODEX_RUNBOOK, PlanB). | Parser fairness guard, scheduler telemetry. |
| 2025-11-13 09:55 | Verification harness enforces `InterfacePortQueueMetrics.QueueBuildDelayMs` p95 ≤120 ms / p99 ≤200 ms and dispatcher harness raises when queue delay >200 ms. | `Tools\Invoke-StateTraceVerification.ps1` queue gate output, `Tools\Invoke-InterfaceDispatchHarness.ps1 -QueueDelayCriticalMs 200` logs. | docs/CODEX_RUNBOOK.md, docs/telemetry/Automation_Gates.md |
| 2025-11-13 11:05 | Queue delay summary export + telemetry bundle hook added so every verification run produces `Logs/IngestionMetrics/QueueDelaySummary-<timestamp>.json`, and `Tools\Publish-TelemetryBundle.ps1 -AreaName Routing` auto-pulls the summary. | `Tools\Invoke-StateTraceVerification.ps1 -QueueDelaySummaryPath ...` output, telemetry bundle manifest showing `QueueDelaySummary*.json`. | Tools/Invoke-StateTraceVerification.ps1, Tools/Publish-TelemetryBundle.ps1 |
| 2025-10-15 15:12 | Identified missing `InterfaceSyncTiming` events and planned dispatcher/pipeline capture once emission path understood. | Telemetry gaps noted prior to patching `Update-InterfacesInDb`. | docs/StateTrace_Consolidated_Plans.md:4-5 |
| 2025-10-15 15:46 | Confirmed strict-mode `VariableIsUndefined` error in `Update-InterfacesInDb` prevented telemetry, queued fix + regression tests. | Root cause tied to uninitialised metrics in stream threads. | docs/StateTrace_Consolidated_Plans.md:7 |
| 2025-10-15 16:30 | Pipeline replay produced 37 `InterfaceSyncTiming` events with healthy stream metrics (Clone avg 22.2 ms/p95 53.7 ms, Dispatch avg 34.2 ms/p95 64.1 ms). | Command: `Tools/Invoke-StateTracePipeline.ps1 -SkipTests -VerboseParsing -ResetExtractedLogs`. | docs/StateTrace_Consolidated_Plans.md:8 |
| 2025-10-15 16:45 | Dispatcher harness showed queue build 18.9-26.5 ms, delay ≤103 ms, highlighting upstream InterfaceCall latency (1.5–10.5 s). | Data from `InterfacePortQueueMetrics` vs `DatabaseWriteBreakdown`. | docs/StateTrace_Consolidated_Plans.md:9 |
| 2025-10-15 17:05 | Added `SiteCacheFetchDurationMs`/`SiteCacheRefreshDurationMs` instrumentation mirrored into `DatabaseWriteBreakdown`; tests updated. | `Invoke-Pester Modules/Tests/ParserPersistenceModule.Tests.ps1` cover the new metrics. | docs/StateTrace_Consolidated_Plans.md:10 |
| 2025-11-13 | Routed telemetry bundles landed in Plans E/G by way of `Tools\New-TelemetryBundle.ps1`; Plan A now owns dispatcher alert integration + routing bundle drop-offs (ST-A-005/006). | Bundle README cites routing evidence + Plan A task IDs. | docs/plans/PlanE_Telemetry.md, docs/plans/PlanG_ReleaseGovernance.md |

## Automation hooks
- `Tools\Invoke-StateTracePipeline.ps1 -SkipTests -VerboseParsing -ResetExtractedLogs` (cold history) followed by `Tools\Invoke-WarmRunRegression.ps1 -VerboseParsing` to confirm routing telemetry persists across warm runs.
- `powershell.exe -NoLogo -STA -File Tools\Invoke-InterfaceDispatchHarness.ps1 -Hostname <host>` (run for the BOYO + WLLS corpus listed above) to replay dispatcher load and capture queue/append timings alongside the pipeline results (PowerShell 7 does not expose `System.Windows.Threading.Dispatcher`, so use Windows PowerShell with `-STA`).
- `Tools\Invoke-RoutingQueueSweep.ps1 -UseBalancedHostOrder -QueueDelayWarningMs 120 -QueueDelayCriticalMs 200` to orchestrate the dispatcher harness for multiple hosts with one command; the script shells out to `powershell.exe -STA`, logs to `Logs\DispatchHarness\<host>-<timestamp>.log`, and prints a queue-delay summary for each host. When the balanced lists are missing, pass `-HostListPath Data\RoutingHosts.txt` and `Tools\New-BalancedRoutingHostList.ps1` will rebuild them automatically.
- `Tools\Invoke-StateTraceVerification.ps1 -SharedCacheMinimumSiteCount 2 -SharedCacheRequiredSites BOYO,WLLS -EmitWarmRunTelemetry` whenever Plan A changes ship; the harness now auto-enforces `InterfacePortQueueMetrics.QueueBuildDelayMs` gates (use `-QueueMetricsPath` when replaying older telemetry, and only pass `-SkipQueueDelayEvaluation` when the absence of telemetry is documented). Every successful run writes `Logs\IngestionMetrics\QueueDelaySummary-<timestamp>.json` (override via `-QueueDelaySummaryPath`) for bundle evidence.
- Capture `Logs/IngestionMetrics/<date>.json` (InterfaceSyncTiming + InterfacePortQueueMetrics) and the dispatcher harness output; reference both paths in TaskBoard updates per `docs/CODEX_PLAN_AUTOMATION_MATRIX.md`.
- When Plan B publishes telemetry bundles (`Logs/TelemetryBundles/<date>/`), drop the routing JSON + dispatcher logs into the same folder so Plan G can confirm release readiness.

## Telemetry gates
- `InterfacePortQueueMetrics.QueueBuildDurationMs` average < 30 ms; `QueueBuildDelayMs` (a.k.a. `QueueDelayMs`) p95 ≤ 120 ms and p99 ≤ 200 ms. These limits are enforced by `Tools\Invoke-StateTraceVerification.ps1` and the dispatcher harness (`-QueueDelayWarningMs`/`-QueueDelayCriticalMs`). Log any guard failure in Plan A + Task Board updates.
- `InterfaceSyncTiming.StreamCloneDurationMs` p95 < 75 ms and event count equals processed hosts (37 for BOYO/WLLS corpus); deviations require a Plan A + TaskBoard update.
- `InterfaceSyncTiming.StreamDispatchDurationMs` and dispatcher harness `DispatcherDurationMs` remain within 2x historical baselines (see 2025-10-15 entries in `docs/StateTrace_Consolidated_Plans.md`); document any regressions.
- Gates are tracked in `docs/telemetry/Automation_Gates.md#plan-a`; update that file if thresholds change.
- Routing telemetry + dispatcher evidence copied into the release telemetry bundle (see Plan E ST-E-007 / Plan G ST-G-007) before any candidate build proceeds.

## References & history
- Historical narrative: `docs/StateTrace_Consolidated_Plans.md` (2025-10-15 InterfaceSyncTiming and dispatcher harness entries).
- Automation references: `docs/CODEX_PLAN_AUTOMATION_MATRIX.md`, `docs/CODEX_RUNBOOK.md`, `docs/CODEX_SHARED_CACHE_DIAGNOSTICS.md`.
- UI + operator guidance: `docs/StateTrace_Operators_Runbook.md`, `docs/UI_Smoke_Checklist.md`, `docs/plans/PlanD_FeatureExpansion.md`.






